"use strict";function GetQueryStringParameteres(){for(var e=[],t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<t.length;s++){var i=t[s].split("=")[0],l=t[s].split("=")[1];e[i]=l}return e}function GetPreselectedValues(e,t){if(!t)return null;for(var s=[],i=0;i<t.length;i++)for(var l=0;l<e.length;l++)e[l].Value==t[i]&&s.push(e[l]);return s}!function(e){e(document).ready((function(){e("#current-culture").val();for(var t=e('input[type="search"]'),s=t.closest(".input-wrapper").find(".k-icon"),i=e('[data-sf-role="searchTextBoxId"]'),l=0;l<i.length;l++){var n=e(i[l]);a({resultsUrl:n.siblings('[data-sf-role="resultsUrl"]').first().val(),indexCatalogue:n.siblings('[data-sf-role="indexCatalogue"]').first().val(),wordsMode:n.siblings('[data-sf-role="wordsMode"]').first().val(),disableSuggestions:e.parseJSON(n.siblings('[data-sf-role="disableSuggestions"]').first().val()),minSuggestionLength:n.siblings('[data-sf-role="minSuggestionLength"]').first().val(),suggestionFields:n.siblings('[data-sf-role="suggestionFields"]').first().val(),language:n.siblings('[data-sf-role="language"]').first().val(),suggestionsRoute:n.siblings('[data-sf-role="suggestionsRoute"]').first().val(),searchTextBoxSelector:n.val(),searchButtonSelector:n.siblings('[data-sf-role="searchButtonId"]').first().val()})}function a(i){var l,n=!0,a=e(i.searchTextBoxSelector);e(i.searchButtonSelector).click(u),a.keypress((function(e){e||(e=window.event);13==(e.keyCode?e.keyCode:e.charCode)&&u(e)})),"*"==a.val()&&a.val("");var o=GetQueryStringParameteres();if(1<Object.keys(o).length&&(o.healthtopic&&o.healthtopic.split(","),o.country&&o.country.split(",")),!i.disableSuggestions){a.keyup((function(t){if(38!=t.keyCode&&40!=t.keyCode&&27!=t.keyCode){13==t.keyCode&&u(t);var s={},l=a.val().trim();l.length>=i.minSuggestionLength&&(s.IndexName=i.indexCatalogue,s.SuggestionFields=i.suggestionFields,s.Text=l,s.Language=i.language,e.ajax({type:"GET",url:i.suggestionsRoute,dataType:"json",data:s,success:r}))}}));try{a.autocomplete({source:[],messages:{noResults:"",results:function(){}},select:function(e,t){a.val(t.item.value),u(e)}}).autocomplete("widget").addClass("sf-autocomplete")}catch(e){}}function r(e,t){var s=e.Suggestions;a.autocomplete("option","source",s),a.autocomplete("search",a.val().trim())}function u(t){var s,o,r,u;t||(t=window.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,n=!(a.val()&&a.val().trim()||null===e("#multiselectHealthTopic").val()&&null===e("#multiselectCountries").val()),l=n?"*":"*"==a.val()?"":a.val(),i.indexCatalogue&&(window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({predicate:"Search for",object:a.val(),objectMetadata:[{K:"PageUrl",V:location.href}]}),window.location=(s=l.trim(),o=(-1==i.resultsUrl.indexOf("?")?"?":"&")+"indexCatalogue="+encodeURIComponent(i.indexCatalogue),r="&searchQuery="+encodeURIComponent(s),u="&wordsMode="+i.wordsMode,i.resultsUrl+o+r+u))}t.keyup((function(){0<e(this).val().length?s.show():s.hide()})),t.on("focus",(function(){0<e(this).val().length&&s.show()})),s.on("click",(function(t){e('input[type="search"]').val(""),s.hide()}))}setTimeout((function(){e(".filters-item").each((function(){e(this).css("display","block"),""!=e("#multiselectHealthTopic_taglist")&&e("#multiselectHealthTopic_taglist").insertAfter("#multiselectHealthTopic"),""!=e("#multiselectCountries_taglist")&&e("#multiselectCountries_taglist").insertAfter("#multiselectCountries")}))}),500)}))}(jQuery),jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())};